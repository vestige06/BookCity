CREATE TABLE advertisment (advertisment_id BIGINT AUTO_INCREMENT, name VARCHAR(45) NOT NULL, url TEXT NOT NULL, img_url TEXT NOT NULL, comment VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(advertisment_id)) ENGINE = INNODB;
CREATE TABLE big_books_category (big_books_category_id BIGINT, name VARCHAR(45) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(big_books_category_id)) ENGINE = INNODB;
CREATE TABLE books (book_id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, price FLOAT(18, 2) NOT NULL, description TEXT NOT NULL, isbn VARCHAR(255) NOT NULL, author VARCHAR(45) NOT NULL, publisher VARCHAR(255) NOT NULL, is_onsale TINYINT DEFAULT '0', img TEXT NOT NULL, books_category_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX books_category_id_idx (books_category_id), PRIMARY KEY(book_id)) ENGINE = INNODB;
CREATE TABLE books_category (books_category_id BIGINT, name VARCHAR(45) NOT NULL, big_books_category_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX big_books_category_id_idx (big_books_category_id), PRIMARY KEY(books_category_id)) ENGINE = INNODB;
CREATE TABLE client (id BIGINT AUTO_INCREMENT, uid BIGINT, name VARCHAR(45) NOT NULL, password VARCHAR(45) NOT NULL, user_category_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX uid_idx (uid), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE client_books_advertisment (book_id BIGINT, advertisment_id BIGINT, user_category_id BIGINT, orders_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(book_id, advertisment_id, user_category_id, orders_id)) ENGINE = INNODB;
CREATE TABLE order_detail (detail_id BIGINT AUTO_INCREMENT, number BIGINT NOT NULL, discount FLOAT(18, 2) NOT NULL, book_name VARCHAR(45) NOT NULL, book_price FLOAT(18, 2) NOT NULL, description TEXT NOT NULL, orders_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX orders_id_idx (orders_id), PRIMARY KEY(detail_id)) ENGINE = INNODB;
CREATE TABLE ordered (orders_id BIGINT AUTO_INCREMENT, guy_addr VARCHAR(45) NOT NULL, guy_phone VARCHAR(45) NOT NULL, is_paied TINYINT DEFAULT '0' NOT NULL, guy_payway VARCHAR(45) NOT NULL, pay_status VARCHAR(45) NOT NULL, is_delivery TINYINT DEFAULT '0' NOT NULL, is_receipt TINYINT DEFAULT '0' NOT NULL, post_money FLOAT(18, 2) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(orders_id)) ENGINE = INNODB;
CREATE TABLE promotion (promotion_id BIGINT AUTO_INCREMENT, price FLOAT(18, 2) NOT NULL, discount FLOAT(18, 2) NOT NULL, is_recommend TINYINT DEFAULT '0' NOT NULL, is_active TINYINT DEFAULT '0' NOT NULL, comment VARCHAR(255), book_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX book_id_idx (book_id), PRIMARY KEY(promotion_id)) ENGINE = INNODB;
CREATE TABLE stock (stock_id BIGINT AUTO_INCREMENT, count BIGINT NOT NULL, income_price FLOAT(18, 2) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(stock_id)) ENGINE = INNODB;
CREATE TABLE user (uid BIGINT AUTO_INCREMENT, name VARCHAR(45) NOT NULL, password VARCHAR(45) NOT NULL, user_category_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_category_id_idx (user_category_id), PRIMARY KEY(uid)) ENGINE = INNODB;
CREATE TABLE user_category (user_category_id BIGINT, name VARCHAR(45) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_category_id)) ENGINE = INNODB;
CREATE TABLE user_detail (user_detail_id BIGINT AUTO_INCREMENT, email VARCHAR(255) NOT NULL, tel VARCHAR(45) NOT NULL, question VARCHAR(45) NOT NULL, answer VARCHAR(45) NOT NULL, sex TINYINT DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_detail_id)) ENGINE = INNODB;
ALTER TABLE books ADD CONSTRAINT books_books_category_id_books_category_books_category_id FOREIGN KEY (books_category_id) REFERENCES books_category(books_category_id);
ALTER TABLE books_category ADD CONSTRAINT bbbb_1 FOREIGN KEY (big_books_category_id) REFERENCES big_books_category(big_books_category_id);
ALTER TABLE client ADD CONSTRAINT client_uid_user_uid FOREIGN KEY (uid) REFERENCES user(uid);
ALTER TABLE client_books_advertisment ADD CONSTRAINT client_books_advertisment_orders_id_ordered_orders_id FOREIGN KEY (orders_id) REFERENCES ordered(orders_id);
ALTER TABLE client_books_advertisment ADD CONSTRAINT client_books_advertisment_book_id_books_book_id FOREIGN KEY (book_id) REFERENCES books(book_id);
ALTER TABLE client_books_advertisment ADD CONSTRAINT caaa FOREIGN KEY (advertisment_id) REFERENCES advertisment(advertisment_id);
ALTER TABLE order_detail ADD CONSTRAINT order_detail_orders_id_ordered_orders_id FOREIGN KEY (orders_id) REFERENCES ordered(orders_id);
ALTER TABLE promotion ADD CONSTRAINT promotion_book_id_books_book_id FOREIGN KEY (book_id) REFERENCES books(book_id);
ALTER TABLE user ADD CONSTRAINT user_user_category_id_user_category_user_category_id FOREIGN KEY (user_category_id) REFERENCES user_category(user_category_id);
